(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{12976:function(e,n,t){"use strict";t.d(n,{Z:function(){return k}});var r=t(50029),i=t(64687),o=t.n(i),s=t(41664),a=t.n(s),c=t(29224),l=t.n(c),d=t(70491),u=t.n(d),h=t(86188),p=t.n(h),f=t(85444),m=f.default.div.withConfig({displayName:"styles__StyledLayout",componentId:"sc-xczy9u-0"})(["overflow:hidden;height:100%;width:100%;margin:0;padding:0;display:flex;flex-wrap:wrap;.menu{height:auto;}.content-header{flex:0 0 80px;}"]),j=f.default.div.withConfig({displayName:"styles__StyledContent",componentId:"sc-xczy9u-1"})(["display:flex;flex-direction:column;flex:1 1 0%;overflow:auto;height:calc(100% - 3rem);.inlineeditlarger{padding:10px;}.inlineedit{padding:10px;margin:-10px;}.content-wrapper{padding:",";min-height:800px;}"],function(e){return e.theme.spacing.four}),g=t(11163),x=t(84506),v=t(67294),b=t(40203),w=t(13258),y=t.n(w),_=t(5801),C=t.n(_),P=t(14682),S=t(85893),k=function(e){var n,t=e.children,i=e.headerChildren,s=e.title,c=(0,g.useRouter)(),d=c.pathname,f=c.push,_=(0,v.useState)(),k=_[0],O=_[1],z=(0,b.Gg)();(0,v.useEffect)(function(){P.y.getProject().then(function(e){O(e.project)})},[]);var M=(n=(0,r.Z)(o().mark(function e(){return o().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:(0,b.KY)("none","",-1,0),f("/");case 2:case"end":return e.stop()}},e)})),function(){return n.apply(this,arguments)});return(0,S.jsxs)(m,{children:[(0,S.jsx)(l(),{app:null==k?void 0:k.short_name,appBarActions:z.user.role>0?(0,S.jsxs)("div",{style:{display:"flex",flexDirection:"row",alignItems:"center",marginRight:10},children:[x.demo&&(0,S.jsx)("div",{children:"DEMO MODE"}),(0,S.jsx)(y(),{parentElement:(0,S.jsx)(C(),{icon:{name:"AccountCircleGenericUser",color:"white",size:22},shape:"circle",variant:"link",className:"logout-link"}),position:"top-right",children:(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)(w.ActionMenuItem,{label:"Logout",onClick:M}),!1]})})]}):(0,S.jsx)(S.Fragment,{})}),(0,S.jsxs)(p(),{className:"menu",itemMatchPattern:function(e){return e===d},itemRenderer:function(e){var n=e.title,t=e.href;return(0,S.jsx)(a(),{href:t,children:n})},location:d,children:[0==z.user.role&&(0,S.jsxs)(h.MenuContent,{children:[(0,S.jsx)(h.MenuItem,{href:"/",icon:{name:"AccountUser"},title:"Login"}),(0,S.jsx)(h.MenuItem,{href:"/registration-form",icon:{name:"ObjectsClipboardEdit"},title:"User Registration Form"})]}),4==z.user.role&&(0,S.jsxs)(h.MenuContent,{children:[(0,S.jsx)(h.MenuItem,{href:"/",icon:{name:"ViewList"},title:"Project Home"}),(0,S.jsx)(h.MenuItem,{href:"/user-dashboard",icon:{name:"ServerEdit"},title:"My Info"}),(0,S.jsx)(h.MenuItem,{href:"/project-admin-dashboard",icon:{name:"AccountGroupShieldAdd"},title:"Users Dashboard"}),(0,S.jsx)(h.MenuItem,{href:"/site-dashboard",icon:{name:"ConnectionNetworkComputers2"},title:"Client Sites"}),(0,S.jsx)(h.MenuItem,{href:"/project-configuration",icon:{name:"SettingsCog"},title:"Project Configuration"}),(0,S.jsx)(h.MenuItem,{href:"/server-config",icon:{name:"ConnectionServerNetwork1"},title:"Server Configuration"}),(0,S.jsx)(h.MenuItem,{href:"/downloads",icon:{name:"ActionsDownload"},title:"Downloads"}),(0,S.jsx)(h.MenuItem,{href:"/logout",icon:{name:"PlaybackStop"},title:"Logout"})]}),(1==z.user.role||2==z.user.role||3==z.user.role)&&(0,S.jsxs)(h.MenuContent,{children:[(0,S.jsx)(h.MenuItem,{href:"/",icon:{name:"ViewList"},title:"Project Home Page"}),(0,S.jsx)(h.MenuItem,{href:"/user-dashboard",icon:{name:"ServerEdit"},title:"My Info"}),(0,S.jsx)(h.MenuItem,{href:"/downloads",icon:{name:"ActionsDownload"},title:"Downloads"}),(0,S.jsx)(h.MenuItem,{href:"/logout",icon:{name:"PlaybackStop"},title:"Logout"})]}),(0,S.jsx)(h.MenuFooter,{})]}),(0,S.jsxs)(j,{children:[(0,S.jsx)(u(),{className:"content-header",title:s,children:i}),(0,S.jsx)("div",{className:"content-wrapper",children:t})]})]})}},46237:function(e,n,t){"use strict";t.r(n);var r=t(8307),i=t(50029),o=t(64687),s=t.n(o),a=t(73214),c=t(74231),l=t(3159),d=t.n(l),u=t(5801),h=t.n(u),p=t(30038),f=t.n(p),m=t(12976),j=t(78455),g=t(11163),x=t(40203),v=t(84506),b=t(14682),w=t(89002),y=t(67294),_=t(13936),C=t(57539),P=t.n(C),S=t(85893);function k(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function O(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?k(Object(t),!0).forEach(function(n){(0,r.Z)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):k(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var z=P(),M=c.Ry().shape({username:c.Z_().min(2,"Too Short!").max(50,"Too Long!").required("Required"),password:c.Z_().max(50,"Too Long!").required("Required")});n.default=function(){var e,n=(0,g.useRouter)().push,t=(0,x.Gg)(),r=(0,y.useState)(!1),o=r[0],c=r[1],l=(0,y.useState)(),u=l[0],p=l[1],C=(0,y.useState)([]),P=C[0],k=C[1],I=(0,y.useState)(!1),E=I[0],N=I[1];(0,y.useEffect)(function(){b.y.getProject().then(function(e){p(e.project)}),t.user.role>0&&b.y.getClients().then(function(e){k(e.client_list.filter(function(e){return e.approval_state>=100}))}).catch(function(){})},[t.user.role]);var F=(e=(0,i.Z)(s().mark(function e(t){return s().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:v.demo?t.username.includes("supersuper")?((0,x.KY)(t.username,t.password,1,5),n("/project-admin-dashboard")):t.username.includes("projectadmin")?((0,x.KY)(t.username,t.password,1,4),n("/project-admin-dashboard")):(t.username.includes("orgadmin")?(0,x.KY)(t.username,t.password,1,3):(0,x.KY)(t.username,t.password,1,1),n("/user-dashboard")):b.y.login({email:t.username,password:t.password}).then(function(e){void 0!==e?"ok"==e.status&&("project_admin"==e.user.role?((0,x.KY)(e.user.email,e.access_token,e.user.id,4),void 0===u||u.public?n("/project-admin-dashboard"):n("/project-configuration")):"org_admin"==e.user.role?((0,x.KY)(e.user.email,e.access_token,e.user.id,3),n("/user-dashboard")):"lead"==e.user.role?((0,x.KY)(e.user.email,e.access_token,e.user.id,2),n("/user-dashboard")):"member"==e.user.role?((0,x.KY)(e.user.email,e.access_token,e.user.id,1),n("/user-dashboard")):""==e.user.role&&((0,x.KY)(e.user.email,e.access_token,e.user.id,-1),n("/registration-form"))):alert("Error: make sure site is up and configured.")}).catch(function(e){console.log(e),(0,x.KY)("","",-1,0),c(!0)});case 1:case"end":return e.stop()}},e)})),function(n){return e.apply(this,arguments)}),A=[{accessor:"name"},{accessor:"capacity",Cell:function(e){var n=e.value;return"NUM GPUS: "+n.num_of_gpus+";  MEM/GPU: "+n.mem_per_gpu_in_GiB}},{accessor:"organization",Cell:function(e){var n=e.value;return(0,S.jsx)(S.Fragment,{children:(0,S.jsx)("div",{className:"inlineedit",children:n||"[none]"})})}}];return(0,S.jsx)(a.J9,{initialValues:{username:"",password:""},onSubmit:F,validationSchema:M,children:function(e){return u?t.user.role>0?(0,S.jsxs)(m.Z,{title:u.title?u.title:"PROJECT TITLE placeholder",children:[4==t.user.role?(0,S.jsx)("div",{style:{marginBottom:"0.75em"},children:(0,S.jsxs)(d(),{children:[u.frozen?(0,S.jsx)("span",{children:"This project has been frozen. Project values including the application configuartion and server configurations are no longer editable."}):(0,S.jsx)("span",{children:"Once all the project values including the application configuartion and server configurations are set, freeze the project to create certificates based on the server configurations and allow users to download startup kits:"}),(0,S.jsx)("br",{}),(0,S.jsx)("br",{}),(0,S.jsx)(h(),{type:"info",disabled:u.frozen||!u.public||!u.server1||!u.short_name,onClick:function(){return N(!0)},children:"Freeze Project"}),!u.public&&(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)("br",{}),(0,S.jsx)("span",{children:"- Cannot freeze project before project has been made public (see Project Configuration page)."}),(0,S.jsx)("br",{})]}),!u.short_name&&(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)("br",{}),(0,S.jsx)("span",{children:"- Cannot freeze project if Project Short Name is not set (see Project Configuration page)."}),(0,S.jsx)("br",{})]}),!u.server1&&(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)("br",{}),(0,S.jsx)("span",{children:"- Cannot freeze project if Server DNS on Server Configuration is empty."}),(0,S.jsx)("br",{})]}),!u.frozen&&(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)("br",{}),(0,S.jsx)("span",{children:"Note that after freezing the project, there is no way to unfreeze the project and all of these values will no longer be editable."})]})]})}):(0,S.jsx)(S.Fragment,{}),(0,S.jsxs)("div",{style:{float:"left",width:"100%",paddingRight:"488px",minHeight:"577px",fontSize:"25px"},children:[(0,S.jsx)(d(),{children:u.description}),(0,S.jsx)("div",{style:{marginBottom:"0.5em"}}),(0,S.jsx)(d(),{title:"Client Sites",children:(0,S.jsx)(z,{columns:A,data:P,rowOnClick:function(e){console.log("clicked row"),console.log(e)},disableColumnHiding:!0,disableExport:!0,disableFilters:!0,getHeaderProps:function(e){return{style:{fontSize:"1rem",fontWeight:"bold"}}},getRowId:function(e,n){return""+e.id}})})]}),(0,S.jsx)("div",{style:{position:"absolute",right:0,width:"487px"}}),(0,S.jsx)("div",{style:{position:"absolute",right:0,paddingRight:"1em",width:"487px"},children:(0,S.jsx)(d(),{children:(0,S.jsxs)(d(),{children:[(0,S.jsxs)("div",{children:["Clients registered: ",u.num_clients]}),(0,S.jsxs)("div",{children:["Organizations joined: ",u.num_orgs]}),(0,S.jsxs)("div",{children:["Planned start date: ",u.starting_date]}),(0,S.jsxs)("div",{children:["Planned end date: ",u.end_date]})]})})}),(0,S.jsx)(f(),{footer:(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)(h(),{type:"secondary",variant:"outline",onClick:function(){N(!1)},children:"Cancel"}),(0,S.jsx)(h(),{type:"info",disabled:u.frozen,onClick:function(){b.y.patchProject({frozen:!0}).then(function(e){p(e.project)}).catch(function(e){console.log(e),n("/")}),p(O(O({},u),{},{frozen:!0})),N(!1)},children:"Freeze"})]}),size:"large",open:E,title:"Confirm Freeze Project?",closeOnBackdropClick:!1,children:(0,S.jsx)("div",{children:"Note that after freezing the project, the project information including the application and server configurations can no longer be changed!"})})]}):(0,S.jsxs)(_.Z,{title:u.title?u.title:"PROJECT TITLE placeholder",children:[t.expired&&(0,S.jsx)(w.P,{status:"warning",rounded:!0,children:"Your session has expired. Please log in again."}),o&&(0,S.jsx)(w.P,{status:"warning",rounded:!0,children:"Login attempt failed. Please check that your username and password are correct and try again."}),(0,S.jsx)("div",{style:{float:"left",width:"100%",paddingRight:"488px",minHeight:"577px"},children:(0,S.jsx)(d(),{children:u.description})}),(0,S.jsxs)("div",{style:{position:"absolute",right:0,width:"487px"},children:[(0,S.jsx)(d(),{children:(0,S.jsxs)(d(),{children:[(0,S.jsxs)("div",{children:["Clients registered: ",u.num_clients]}),(0,S.jsxs)("div",{children:["Organizations joined: ",u.num_orgs]}),(0,S.jsxs)("div",{children:["Planned start date: ",u.starting_date]}),(0,S.jsxs)("div",{children:["Planned end date: ",u.end_date]})]})}),(0,S.jsxs)(d(),{className:"form-example",loading:e.isSubmitting,title:"Login",children:[(0,S.jsx)(j.nv,{label:"Username / Email",name:"username"}),(0,S.jsx)(j.nv,{label:"Password",name:"password",inputType:"password"}),(0,S.jsx)(h(),{disabled:!e.dirty||!e.isValid,onClick:function(){return e.handleSubmit()},children:"Sign In"}),u.public?(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)("br",{}),(0,S.jsx)("div",{style:{height:"1.18em",borderTop:"1px #606060 solid"}}),(0,S.jsx)("div",{style:{color:"#AAAAAA",fontSize:"1.25rem",fontWeight:500,marginBottom:"0.5em"},children:"New User"}),(0,S.jsx)(h(),{onClick:function(){return n("/registration-form")},children:"Sign Up"})]}):(0,S.jsx)(S.Fragment,{})]})]})]}):(0,S.jsx)("span",{children:"loading..."})}})}},48312:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return t(46237)}])},50029:function(e,n,t){"use strict";function r(e,n,t,r,i,o,s){try{var a=e[o](s),c=a.value}catch(e){t(e);return}a.done?n(c):Promise.resolve(c).then(r,i)}function i(e){return function(){var n=this,t=arguments;return new Promise(function(i,o){var s=e.apply(n,t);function a(e){r(s,i,o,a,c,"next",e)}function c(e){r(s,i,o,a,c,"throw",e)}a(void 0)})}}t.d(n,{Z:function(){return i}})}},function(e){e.O(0,[234,539,787,390,888,774,179],function(){return e(e.s=48312)}),_N_E=e.O()}]);