(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[643],{87648:function(t,n,a){"use strict";a.r(n);var i=a(59499),e=a(57539),r=a.n(e),o=a(3159),c=a.n(o),u=a(57061),s=a(67294),l=a(27484),d=a.n(l),_=a(84506),p=a(68253),g=a(89924),f=a(11163),m=a(85893),v=r();n.default=function(){var t=_,n=(0,p.Gg)(),a=(0,f.useRouter)().push,e=(0,s.useState)([]),r=e[0],o=e[1],l=(0,s.useState)({column:"",id:-1}),h=l[0],G=l[1],y=(0,s.useState)(""),b=y[0],A=y[1];(0,s.useEffect)((function(){if(t.demo){var n={data:{status:"ok",client_list:[{approval_state:0,capacity:{num_of_gpus:4,mem_per_gpu_in_GiB:8},capacity_id:13,created_at:"Thu, 11 Aug 2022 20:32:02 GMT",description:"",id:1,name:"",organization:"NVIDIA",organization_id:1,updated_at:"Fri, 12 Aug 2022 06:53:43 GMT"},{approval_state:0,capacity:{num_of_gpus:1,mem_per_gpu_in_GiB:16},capacity_id:10,created_at:"Thu, 11 Aug 2022 20:32:40 GMT",description:"",id:2,name:"one",organization:"NVIDIA",organization_id:1,updated_at:"Fri, 12 Aug 2022 06:53:37 GMT"},{approval_state:0,capacity:{num_of_gpus:4,mem_per_gpu_in_GiB:16},capacity_id:2,created_at:"Fri, 12 Aug 2022 05:30:51 GMT",description:"",id:4,name:"",organization:"NVIDIA",organization_id:1,updated_at:"Fri, 12 Aug 2022 05:30:51 GMT"},{approval_state:0,capacity:{num_of_gpus:4,mem_per_gpu_in_GiB:16},capacity_id:2,created_at:"Fri, 12 Aug 2022 05:39:58 GMT",description:"",id:5,name:"",organization:"bbb",organization_id:19,updated_at:"Fri, 12 Aug 2022 05:39:58 GMT"},{approval_state:0,capacity:{num_of_gpus:4,mem_per_gpu_in_GiB:16},capacity_id:2,created_at:"Fri, 12 Aug 2022 05:40:01 GMT",description:"",id:6,name:"",organization:"bbb",organization_id:19,updated_at:"Fri, 12 Aug 2022 05:40:01 GMT"},{approval_state:0,capacity:{num_of_gpus:4,mem_per_gpu_in_GiB:16},capacity_id:2,created_at:"Fri, 12 Aug 2022 05:41:21 GMT",description:"",id:7,name:"",organization:"bbb",organization_id:19,updated_at:"Fri, 12 Aug 2022 05:41:21 GMT"},{approval_state:0,capacity:{num_of_gpus:4,mem_per_gpu_in_GiB:16},capacity_id:2,created_at:"Fri, 12 Aug 2022 05:44:08 GMT",description:"",id:8,name:"",organization:"bbb",organization_id:19,updated_at:"Fri, 12 Aug 2022 05:44:08 GMT"},{approval_state:0,capacity:{num_of_gpus:4,mem_per_gpu_in_GiB:32},capacity_id:19,created_at:"Fri, 12 Aug 2022 05:48:45 GMT",description:"",id:9,name:"b",organization:"NVIDIA",organization_id:1,updated_at:"Fri, 12 Aug 2022 06:54:45 GMT"}]}};if("ok"==n.data.status){var i=n.data.client_list;o(i)}else alert(n.data.status)}else g.y.getClients().then((function(t){var n=t.client_list;o(n)})).catch((function(){a("/")}))}),[n.user.token,t.demo]);var C=(0,s.useCallback)((function(t){t&&t.focus()}),[]),F=[{accessor:"name",Cell:function(t){var n=t.value,a=t.row;return(0,m.jsx)(m.Fragment,{children:"name"==h.column&&h.id==parseInt(a.id.toString())?(0,m.jsx)("input",{ref:C,id:a.id.toString(),value:b,title:"name",onBlur:function(t){!function(t){g.y.patchClient(parseInt(t.target.id),(0,i.Z)({},t.target.title,b)).then((function(n){if("ok"==n.status){var a=r.map((function(a){return a.id==parseInt(t.target.id)&&(a=n.client),a}));o(a)}})).catch((function(t){alert(t)}))}(t),function(t){G({column:t.target.title,id:-1})}(t)},onChange:function(t){A(t.target.value)}}):(0,m.jsx)("div",{className:"inlineedit",onClick:function(){a.values.approval_state<=0&&(A(n),G({column:"name",id:parseInt(a.id.toString())}))},children:n||"[empty client name]"})})}},{accessor:"capacity",Cell:function(t){var n=t.value;return(0,m.jsx)(m.Fragment,{children:"NUM GPUS: ".concat(null===n||void 0===n?void 0:n.num_of_gpus,"; MEM/GPU: ").concat(null===n||void 0===n?void 0:n.mem_per_gpu_in_GiB)})}},{accessor:"organization",Cell:function(t){var n=t.value;return(0,m.jsx)(m.Fragment,{children:(0,m.jsx)("div",{children:n||"[none]"})})}},{accessor:"created_at",Cell:function(t){var n=t.value;return(0,m.jsx)(m.Fragment,{children:d()(n).format("MM/DD/YYYY HH:mm:ss")})}},{accessor:"approval_state",Cell:function(t){var n=t.value;return(0,m.jsx)(m.Fragment,{children:n<0?"Denied":0==n?"Pending":n>=100?"Approved":n})}},{accessor:"download_count",Header:"Download Count",Cell:function(t){var n=t.value;return(0,m.jsx)(m.Fragment,{children:(0,m.jsx)("div",{children:n||0})})}}];return(0,m.jsx)(u.Z,{title:"Project Admin: Client Sites Dashboard",children:(0,m.jsx)(c(),{title:"Clients",children:(0,m.jsx)(v,{columns:F,data:r,disableFilters:!0,disableExport:!0,getHeaderProps:function(t){return{style:{fontSize:"1rem",fontWeight:"bold"}}},getRowId:function(t,n){return""+t.id},bulkActions:[{label:"Approve Client",onClick:function(t){t.rows.map((function(t){return t.id})).forEach((function(t){g.y.patchClient(+t,{approval_state:100}).then((function(n){if("ok"==n.status){var a=r.map((function(n){return""+n.id==t&&(n.approval_state=100),n}));o(a)}})).catch((function(t){console.log(t),a("/")}))}))}},{label:"Deny Client",critical:!0,onClick:function(t){var n=t.rows.map((function(t){return t.id}));console.log("denying client(s): "+n),console.log(n),n.forEach((function(t){g.y.patchClient(+t,{approval_state:-1}).then((function(n){if("ok"==n.status){var a=r.map((function(n){return""+n.id==t&&(n.approval_state=-1),n}));o(a)}})).catch((function(t){console.log(t),a("/")}))}))}},{critical:!0,label:"Delete Client",icon:{name:"ActionsTrash",color:"red",variant:"solid"},onClick:function(t){t.rows.map((function(t){return t.id})).forEach((function(t){g.y.deleteClient(+t).then((function(n){"ok"==n.status?function(t){o((function(n){return n.filter((function(n){return n.id!=+t}))}))}(+t):alert(n.status)})).catch((function(){a("/")}))}))}}]})})})}},70824:function(t,n,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/site-dashboard",function(){return a(87648)}])}},function(t){t.O(0,[234,539,874,774,888,179],(function(){return n=70824,t(t.s=n);var n}));var n=t.O();_N_E=n}]);