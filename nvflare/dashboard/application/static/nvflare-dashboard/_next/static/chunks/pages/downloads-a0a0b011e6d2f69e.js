(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[526],{89924:function(e,t,n){"use strict";n.d(t,{y:function(){return v}});var r=n(9669),o=n.n(r),i=n(84506),a=n(68253),s=n(35823),c=n.n(s),l=i,u=o().create({baseURL:l.url_root+"/api/v1/",headers:{"Access-Control-Allow-Origin":"*"}});u.interceptors.request.use((function(e){return e.headers.Authorization="Bearer "+(0,a.Gg)().user.token,e}),(function(e){console.log("Interceptor request error: "+e)})),u.interceptors.response.use((function(e){return e}),(function(e){throw console.log(" AXIOS error: "),console.log(e),401===e.response.status&&(0,a.KY)("","",-1,0,"",!0),403===e.response.status&&console.log("Error: "+e.response.data.status),404===e.response.status&&console.log("Error: "+e.response.data.status),409===e.response.status&&console.log("Error: "+e.response.data.status),422===e.response.status&&(0,a.KY)("","",-1,0,"",!0),e}));var d=function(e){return e.data},p=function(e){return u.get(e).then(d)},f=function(e,t,n){return u.post(e,{pin:n},{responseType:"blob"}).then((function(e){t=e.headers["content-disposition"].split('"')[1],c()(e.data,t)}))},m=function(e,t){return u.post(e,t).then(d)},h=function(e,t){return u.patch(e,t).then(d)},g=function(e){return u.delete(e).then(d)},v={login:function(e){return m("login",e)},getUsers:function(){return p("users")},getUser:function(e){return p("users/".concat(e))},getUserStartupKit:function(e,t,n){return f("users/".concat(e,"/blob"),t,n)},getClientStartupKit:function(e,t,n){return f("clients/".concat(e,"/blob"),t,n)},getOverseerStartupKit:function(e,t){return f("overseer/blob",e,t)},getServerStartupKit:function(e,t,n){return f("servers/".concat(e,"/blob"),t,n)},getClients:function(){return p("clients")},getProject:function(){return p("project")},postUser:function(e){return m("users",e)},patchUser:function(e,t){return h("users/".concat(e),t)},deleteUser:function(e){return g("users/".concat(e))},postClient:function(e){return m("clients",e)},patchClient:function(e,t){return h("clients/".concat(e),t)},deleteClient:function(e){return g("clients/".concat(e))},patchProject:function(e){return h("project",e)},getServer:function(){return p("server")},patchServer:function(e){return h("server",e)}}},57061:function(e,t,n){"use strict";n.d(t,{Z:function(){return k}});var r=n(50029),o=n(87794),i=n.n(o),a=n(41664),s=n.n(a),c=n(29224),l=n.n(c),u=n(70491),d=n.n(u),p=n(86188),f=n.n(p),m=n(85444),h=m.default.div.withConfig({displayName:"styles__StyledLayout",componentId:"sc-xczy9u-0"})(["overflow:hidden;height:100%;width:100%;margin:0;padding:0;display:flex;flex-wrap:wrap;.menu{height:auto;}.content-header{flex:0 0 80px;}"]),g=m.default.div.withConfig({displayName:"styles__StyledContent",componentId:"sc-xczy9u-1"})(["display:flex;flex-direction:column;flex:1 1 0%;overflow:auto;height:calc(100% - 3rem);.inlineeditlarger{padding:10px;}.inlineedit{padding:10px;margin:-10px;}.content-wrapper{padding:",";min-height:800px;}"],(function(e){return e.theme.spacing.four})),v=n(11163),j=n(84506),x=n(67294),_=n(68253),y=n(13258),w=n.n(y),S=n(5801),b=n.n(S),C=n(89924),I=n(85893),k=function(e){var t=e.children,n=e.headerChildren,o=e.title,a=(0,v.useRouter)(),c=a.pathname,u=a.push,m=j,S=(0,x.useState)(),k=S[0],N=S[1],z=(0,_.Gg)();(0,x.useEffect)((function(){C.y.getProject().then((function(e){N(e.project)})).catch((function(){N(m.default_project_data)}))}),[]);var P=function(){var e=(0,r.Z)(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(0,_.KY)("none","",-1,0),u("/");case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,I.jsxs)(h,{children:[(0,I.jsx)(l(),{app:null===k||void 0===k?void 0:k.short_name,appBarActions:z.user.role>0?(0,I.jsxs)("div",{style:{display:"flex",flexDirection:"row",alignItems:"center",marginRight:10},children:[m.demo&&(0,I.jsx)("div",{children:"DEMO MODE"}),(0,I.jsx)(w(),{parentElement:(0,I.jsx)(b(),{icon:{name:"AccountCircleGenericUser",color:"white",size:22},shape:"circle",variant:"link",className:"logout-link"}),position:"top-right",children:(0,I.jsxs)(I.Fragment,{children:[(0,I.jsx)(y.ActionMenuItem,{label:"Logout",onClick:P}),!1]})})]}):(0,I.jsx)(I.Fragment,{})}),(0,I.jsxs)(f(),{className:"menu",itemMatchPattern:function(e){return e===c},itemRenderer:function(e){var t=e.title,n=e.href;return(0,I.jsx)(s(),{href:n,children:t})},location:c,children:[0==z.user.role&&(0,I.jsxs)(p.MenuContent,{children:[(0,I.jsx)(p.MenuItem,{href:"/",icon:{name:"AccountUser"},title:"Login"}),(0,I.jsx)(p.MenuItem,{href:"/registration-form",icon:{name:"ObjectsClipboardEdit"},title:"User Registration Form"})]}),4==z.user.role&&(0,I.jsxs)(p.MenuContent,{children:[(0,I.jsx)(p.MenuItem,{href:"/",icon:{name:"ViewList"},title:"Project Home"}),(0,I.jsx)(p.MenuItem,{href:"/user-dashboard",icon:{name:"ServerEdit"},title:"My Info"}),(0,I.jsx)(p.MenuItem,{href:"/project-admin-dashboard",icon:{name:"AccountGroupShieldAdd"},title:"Users Dashboard"}),(0,I.jsx)(p.MenuItem,{href:"/site-dashboard",icon:{name:"ConnectionNetworkComputers2"},title:"Client Sites"}),(0,I.jsx)(p.MenuItem,{href:"/project-configuration",icon:{name:"SettingsCog"},title:"Project Configuration"}),(0,I.jsx)(p.MenuItem,{href:"/server-config",icon:{name:"ConnectionServerNetwork1"},title:"Server Configuration"}),(0,I.jsx)(p.MenuItem,{href:"/downloads",icon:{name:"ActionsDownload"},title:"Downloads"}),(0,I.jsx)(p.MenuItem,{href:"/logout",icon:{name:"PlaybackStop"},title:"Logout"})]}),(1==z.user.role||2==z.user.role||3==z.user.role)&&(0,I.jsxs)(p.MenuContent,{children:[(0,I.jsx)(p.MenuItem,{href:"/",icon:{name:"ViewList"},title:"Project Home Page"}),(0,I.jsx)(p.MenuItem,{href:"/user-dashboard",icon:{name:"ServerEdit"},title:"My Info"}),(0,I.jsx)(p.MenuItem,{href:"/downloads",icon:{name:"ActionsDownload"},title:"Downloads"}),(0,I.jsx)(p.MenuItem,{href:"/logout",icon:{name:"PlaybackStop"},title:"Logout"})]}),(0,I.jsx)(p.MenuFooter,{})]}),(0,I.jsxs)(g,{children:[(0,I.jsx)(d(),{className:"content-header",title:o,children:n}),(0,I.jsx)("div",{className:"content-wrapper",children:t})]})]})}},56921:function(e,t,n){"use strict";n.d(t,{P:function(){return l},X:function(){return c}});var r=n(85444),o=n(36578),i=n.n(o),a=n(3159),s=n.n(a),c=(0,r.default)(s()).withConfig({displayName:"form-page__StyledFormExample",componentId:"sc-rfrcq8-0"})([".bottom{display:flex;gap:",";}.zero-left{margin-left:0;}.zero-right{margin-right:0;}"],(function(e){return e.theme.spacing.four})),l=(0,r.default)(i()).withConfig({displayName:"form-page__StyledBanner",componentId:"sc-rfrcq8-1"})(["margin-bottom:1rem;"])},44561:function(e,t,n){"use strict";n.r(t);var r=n(57061),o=n(3159),i=n.n(o),a=n(67294),s=n(5801),c=n.n(s),l=n(57539),u=n.n(l),d=n(68253),p=n(56921),f=n(7731),m=n.n(f),h=n(84506),g=n(89924),v=n(11163),j=n(30038),x=n.n(j),_=n(85893);t.default=function(){var e=(0,d.Gg)(),t=(0,v.useRouter)().push,n=(0,a.useState)(!1),o=n[0],s=n[1],l=(0,a.useState)(),f=l[0],j=l[1],y=(0,a.useState)([]),w=y[0],S=y[1],b=(0,a.useState)(),C=b[0],I=b[1],k=(0,a.useState)(""),N=k[0],z=k[1],P=u(),A=h;(0,a.useEffect)((function(){if(A.demo){var n={approval_state:1,created_at:"Fri, 22 Jul 2022 16:48:27 GMT",description:"",email:"sitemanager@organization1.com",id:5,name:"John",organization:"NVIDIA",organization_id:1,password_hash:"pbkdf2:sha256:260000$93Zo4zK8kvAb6kkA$99038d7da338cdb1bc6227338f178f66cc6d2af3c471460c5b9e6c62d62c4e07",role:"org_admin",role_id:1,sites:[{name:"site-1",id:0,org:"NVIDIA",num_of_gpus:4,approval_state:100,mem_per_gpu_in_GiB:40},{name:"site-2",id:1,org:"NVIDIA",num_of_gpus:2,approval_state:0,mem_per_gpu_in_GiB:16}],updated_at:"Fri, 22 Jul 2022 16:48:27 GMT"};I((function(){return n}))}else g.y.getProject().then((function(e){j(e.project)})).catch((function(){j(A.default_project_data)})),g.y.getUser(e.user.id).then((function(e){e&&I(e.user);var t=e.user.organization;g.y.getClients().then((function(e){var n=e.client_list.filter((function(e){return""!==t&&e.organization===t})).map((function(e){var t,n;return{name:e.name,id:e.id,org:e.organization,num_of_gpus:null===(t=e.capacity)||void 0===t?void 0:t.num_of_gpus,mem_per_gpu_in_GiB:null===(n=e.capacity)||void 0===n?void 0:n.mem_per_gpu_in_GiB,approval_state:e.approval_state}}));S(n)}))})).catch((function(e){console.log(e),403!==e.response.status&&t("/")}))}),[t,e.user.id,e.user.token,A.demo]);var M=[{accessor:"name"},{accessor:"approval_state",Header:"Download",minWidth:224,Cell:function(e){var t=e.value,n=e.row;return(0,_.jsx)(_.Fragment,{children:null!==f&&void 0!==f&&f.frozen&&t&&t>=100&&Number(C.approval_state)>=100?(0,_.jsx)("div",{children:(0,_.jsx)("div",{children:(0,_.jsx)(c(),{onClick:function(){!function(e){s(!0);var t=F();z(t),g.y.getClientStartupKit(e,"flareconsole",t)}(parseInt(n.id))},type:"primary",children:"Download Startup Kit"})})}):(0,_.jsx)(_.Fragment,{children:(0,_.jsx)("div",{children:(0,_.jsx)("div",{children:(0,_.jsx)(c(),{disabled:!0,children:"Download Startup Kit"})})})})})}}];function F(){return(Math.random()+1).toString(36).substring(6).toUpperCase()}return(0,_.jsx)(r.Z,{title:"Downloads",children:C&&f?(0,_.jsxs)(_.Fragment,{children:[(0,_.jsxs)("div",{style:{width:"46rem"},children:[Number(C.approval_state)<100&&(0,_.jsxs)(p.P,{status:"warning",rounded:!0,children:["Your registration is awaiting approval by the Project Admin. Once approved, you will be able to download your FLARE Console","org_admin"==C.role&&" and Client Site Startup Kits","."]}),!f.frozen&&(0,_.jsxs)(p.P,{status:"warning",rounded:!0,children:["The project is still being finalized by the Project Admin. Once the Project Admin has finished configuration of the project, you will be able to download your FLARE Console","org_admin"==C.role&&" and Client Site Startup Kits","."]}),(0,_.jsxs)(i(),{title:"FLARE Console",children:[(0,_.jsx)("div",{style:{fontSize:"1rem",marginTop:".25rem",marginBottom:".5rem"},children:"Download your FLARE Console to check on the status, submit jobs, and interact with the FL project:"}),f.frozen&&Number(C.approval_state)>=100?(0,_.jsx)(c(),{type:"primary",onClick:function(){s(!0);var e=F();z(e),g.y.getUserStartupKit(C.id,"flareconsole",e)},children:"Download FLARE Console"}):(0,_.jsx)(c(),{disabled:!0,children:"Download FLARE Console"})]}),""!=f.app_location&&(3==e.user.role||4==e.user.role)&&(0,_.jsxs)(i(),{title:"Downloading and configuring application docker",children:[(0,_.jsx)("div",{style:{fontSize:"1rem"},children:"To get the docker image, use the following command:"}),(0,_.jsx)(m(),{cli:!0,copyValue:"docker pull nvcr.io/nvidia/flare-train-sdk-example",children:f.app_location})]}),3==e.user.role&&(0,_.jsx)(i(),{title:"Client Sites",children:(0,_.jsx)(P,{columns:M,data:w,disableFilters:!0,disableExport:!0,getHeaderProps:function(e){return{style:{fontSize:"1rem",fontWeight:"bold"}}},getRowId:function(e,t){return""+e.id}})}),4==e.user.role&&(0,_.jsxs)(i(),{title:"Overseer and Server Startup Kits",children:[f.ha_mode?(0,_.jsx)("div",{style:{marginBottom:"0.75rem"},children:(0,_.jsx)(c(),{onClick:function(){s(!0);var e=F();z(e),g.y.getOverseerStartupKit("flareoverseer",e)},disabled:!f.frozen,type:"primary",children:"Download Overseer Startup Kit"})}):(0,_.jsx)(_.Fragment,{}),(0,_.jsx)("div",{style:{marginBottom:"0.75rem"},children:(0,_.jsx)(c(),{onClick:function(){s(!0);var e=F();z(e),g.y.getServerStartupKit(1,"flareserver1",e)},disabled:!f.frozen,type:"primary",children:"Download Server Startup Kit (primary)"})}),f.ha_mode?(0,_.jsx)("div",{children:(0,_.jsx)(c(),{onClick:function(){s(!0);var e=F();z(e),g.y.getServerStartupKit(2,"flareserver2",e)},disabled:!f.frozen,type:"primary",children:"Download Server Startup Kit (secondary)"})}):(0,_.jsx)(_.Fragment,{})]})]}),(0,_.jsx)(x(),{footer:(0,_.jsx)(_.Fragment,{children:(0,_.jsx)(c(),{type:"primary",variant:"outline",onClick:function(){s(!1)},children:"Okay"})}),size:"large",open:o,title:"Your download should be starting soon.",closeOnBackdropClick:!1,onClose:function(){s(!1)},children:(0,_.jsxs)("div",{children:["The downloaded zip file is protected by a randomly generated secure PIN. Please guard it safely. The system does not keep a copy of it.",(0,_.jsxs)("p",{children:["The secure PIN is: ",(0,_.jsx)("span",{style:{fontWeight:700,color:"#FFF",fontSize:"large"},children:N})]}),(0,_.jsx)("p",{children:"Please unzip the download with the above PIN."})]})})]}):(0,_.jsx)("span",{children:"loading..."})})}},68253:function(e,t,n){"use strict";n.d(t,{Gg:function(){return a},KY:function(){return o},a5:function(){return i}});var r={user:{email:"",token:"",id:-1,role:0},status:"unauthenticated"};function o(e,t,n,o,i){var a=arguments.length>5&&void 0!==arguments[5]&&arguments[5];return r={user:{email:e,token:t,id:n,role:o,org:i},expired:a,status:0==o?"unauthenticated":"authenticated"},localStorage.setItem("session",JSON.stringify(r)),r}function i(e){return r={user:{email:r.user.email,token:r.user.token,id:r.user.id,role:e,org:r.user.org},expired:r.expired,status:r.status},localStorage.setItem("session",JSON.stringify(r)),r}function a(){var e=localStorage.getItem("session");return null!=e&&(r=JSON.parse(e)),r}},14817:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/downloads",function(){return n(44561)}])},84506:function(e){"use strict";e.exports=JSON.parse('{"projectname":"New FL Project","demo":false,"url_root":"/nvflare-dashboard","arraydata":[{"name":"itemone"},{"name":"itemtwo"},{"name":"itemthree"}],"default_project_data":{"app_location":"","description":"Warning: cannot connect to Dashboard API. Please contact your administrator and make sure the site settings are configured properly.","end_date":"","frozen":false,"ha_mode":false,"num_clients":0,"num_orgs":1,"num_users":1,"overseer":"","public":false,"server1":"","server2":"","short_name":"","starting_date":"","title":""}}')}},function(e){e.O(0,[234,539,640,774,888,179],(function(){return t=14817,e(e.s=t);var t}));var t=e.O();_N_E=t}]);