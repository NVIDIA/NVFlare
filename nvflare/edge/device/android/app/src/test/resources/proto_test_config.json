{
  "headers": {
    "device_info": {
      "device_id": "1",
      "app_name": "test",
      "app_version": "1.0",
      "platform": "android",
      "platform_version": "1.2.2"
    },
    "user_info": {
      "user_id": "xyz"
    }
  },
  "steps": [
    {
      "job": {
        "job_name": "federated_learning"
      },
      "response": {
        "status": "RETRY"
      }
    },
    {
      "job": {
        "job_name": "federated_learning"
      },
      "response": {
        "status": "RETRY"
      }
    },
    {
      "job": {
        "job_name": "federated_learning"
      },
      "response": {
        "status": "OK",
        "job_id": "12345",
        "job_name": "federated_learning",
        "job_data": {
          "config": {
            "components": [
              {
                "type": "Trainer.DLTrainer",
                "name": "trainer",
                "args": {
                  "epoch": 5,
                  "lr": 0.0001,
                  "optimizer": "@opt",
                  "loss": "@loss",
                  "transforms": {
                      "pre": ["@t1", "@t2"], 
                      "post": ["@t2", "@t1"]
                  }
                }
              },
              {
                "type": "Optimizer.SGD",
                "name": "opt",
                "args": {}
              },
              {
                "type": "Loss.BCELoss",
                "name": "loss",
                "args": {}
              },
              {
                "type": "Transform.rotate",
                "name": "t1",
                "args": {
                  "angle": 90
                }
              },
              {
                "type": "Transform.rotate",
                "name": "t2",
                "args": {
                  "angle": -60
                }
              },
              {
                "type": "Filter.DP",
                "name": "dp",
                "args": {}
              },
              {
                "type": "Handler.StatsKeeper",
                "name": "stats"
              }
            ],
            "out_filters": ["@dp", "@stats"],
            "handlers": ["@stats"],
            "executors": {
              "*": "@trainer"
            }
          }
        }
      }
    },
    {
      "task": {
        "job_id": "12345"
      },
      "response": {
        "status": "RETRY",
        "job_id": "12345",
        "retry_wait": 2
      }
    },
    {
      "task": {
        "job_id": "12345"
      },
      "response": {
        "status": "OK",
        "job_id": "12345",
        "task_id": "task12345",
        "task_name": "train",
        "task_data": {
          "kind": "model",
          "data": {
            "layer1": [0, 0, 0],
            "layer2": [1, 1, 1]
          },
          "meta": {
            "learning_rate": 0.0001
          }
        },
        "cookie": {
          "model_version": 1,
          "selection_id": 101
        }
      }
    },
    {
      "report": {
        "job_id": "12345",
        "task_id": "task12345",
        "task_name": "train",
        "status": "OK",
        "result": {
          "kind": "model",
          "data": {
            "layer1": [0.0, 0.0, 0.0],
            "layer2": [1.0, 1.0, 1.0]
          }
        },
        "cookie": {
          "model_version": 1,
          "selection_id": 101
        }
      },
      "response": {
        "status": "OK",
        "task_id": "task12345",
        "task_name": "train"
      }
    },
    {
      "task": {
        "job_id": "12345",
        "cookie": {
          "model_version": 1,
          "selection_id": 101
        }
      },
      "response": {
        "status": "DONE"
      }
    }
  ]
} 